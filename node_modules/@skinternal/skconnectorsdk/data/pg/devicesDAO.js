
const constants = require('../../config/constants');
const collectionName = constants.deviceUsersTable;

exports.getDevice = async (deviceId) => {
  const queryParams = [`${deviceId}`]
  const query = `
    SELECT * FROM ${collectionName} 
    WHERE _id = $1
    ;
    `;
  try {
    const response = await global.pg.query(query,queryParams);
    if (!(response && response.rows && Array.isArray(response.rows) &&  response.rows.length >0)){
      return
    }
    return {_id:response.rows[0]._id,...response.rows[0].data}
  } catch (err) {
    throw err
  }
}